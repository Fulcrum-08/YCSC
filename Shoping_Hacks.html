<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Environmental Impact Store</title>
<style>
    * {margin:0;padding:0;box-sizing:border-box;}
    body {font-family: Arial, Helvetica, sans-serif; scroll-behavior: smooth; background-color: #f5f7f3; color: #2f3e2f;}
    
    /* NAVBAR */
    nav {position: fixed; top:0; width:100%; background: #2f5d3a; padding: 15px 40px; display:grid; grid-template-columns: 1fr auto 1fr; align-items:center; z-index:1000;}
    nav h1 {color:#f1f5ef;font-size:22px;margin-right:20px;}
    .nav-left, .nav-right {display:flex; gap:22px; align-items:center;}
    .nav-left {justify-content:flex-start;}
    .nav-right {justify-content:flex-end;}
    .nav-center {display:flex; gap:18px; justify-content:center;}
    nav a {color:#e8f2ea;text-decoration:none;font-size:16px;padding:6px 8px;transition:color 0.3s ease;}
    nav a:hover {color:#cfe3d4;}
    .main-tab {background:#f1f5ef;color:#2f5d3a;padding:10px 24px;border-radius:999px;font-weight:bold;transition:transform 0.25s ease, box-shadow 0.25s ease, background 0.25s ease;}
    .main-tab:hover {background:#e2eadf; transform:translateY(-3px); box-shadow:0 10px 22px rgba(0,0,0,0.25);}

    /* PAGE LAYOUT */
    main {padding:120px 60px 60px; max-width:1200px; margin:0 auto;}
    h2 {font-size:36px; margin-bottom:20px; color:#2f5d3a;}
    p {font-size:18px; max-width:800px; line-height:1.6; margin-bottom:20px;}
    .card {background:white; padding:18px; border-radius:12px; box-shadow:0 6px 18px rgba(15,23,42,0.04); margin-bottom:24px;}
    
    /* DEPARTMENT BAR */
    .dept-bar {display:flex; gap:12px; margin-bottom:16px; flex-wrap:wrap;}
    .dept-bar button {padding:8px 14px; border-radius:999px; border:1px solid rgba(16,24,40,0.06); background:white; cursor:pointer; font-weight:600;}
    .dept-bar button.active {background:#16a34a;color:white;}
    
    /* PRODUCTS GRID */
    .products {display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:16px;}
    .product-card {background:white;padding:14px;border-radius:10px;box-shadow:0 6px 14px rgba(15,23,42,0.03);cursor:pointer;transition: transform .12s ease,border .12s ease; border:1px solid transparent;}
    .product-card:hover {transform:translateY(-4px);}
    .product-card.selected {border-color: rgba(16,185,129,0.18); box-shadow:0 8px 22px rgba(16,185,129,0.06);}
    .prod-meta {font-size:13px;color:#6b7280;margin-top:8px;}
    .badge {display:inline-block;padding:6px 10px;border-radius:999px;color:white;font-weight:700;font-size:12px;}
    .badge.green {background:#16a34a;}
    .badge.orange {background:#f97316;}
    .badge.red {background:#ef4444;}
    
    /* SELECTED ITEMS */
    .selected-list {padding:16px; background:rgba(22,163,74,0.06); border-radius:12px; margin-bottom:24px;}
    .selected-item {display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;}
    .total-price {font-weight:700; margin-top:12px;}
    .clear-btn {padding:8px 12px;border-radius:8px;border:1px solid rgba(16,24,40,0.06);background:white;cursor:pointer; margin-top:12px;}

    /* RECOMMENDATIONS */
    .recommendations {margin-top:24px;}
    .rec-list {display:flex; gap:12px; flex-wrap:wrap; margin-top:12px;}
    .rec-item {background:white; padding:10px; border-radius:8px; box-shadow:0 4px 10px rgba(15,23,42,0.04); min-width:180px; cursor:pointer;}
    .rec-store {font-size:12px;color:#6b7280;margin-top:4px;}
    .rec-btn {margin-top:6px;padding:4px 6px;border-radius:6px;border:none;background:#16a34a;color:white;cursor:pointer;font-size:12px;}
</style>
</head>
<body>

<nav>
    <div class="nav-left">
        <h1>Env Impact Store</h1>
        <a href="index.html">Home</a>
        <a href="index.html#mission">Mission</a>
        <a href="index.html#team">Team</a>
    </div>
    <div class="nav-center">
        <a href="programs.html" class="main-tab">Programs</a>
        <a href="map.html" class="main-tab">Map</a>
        <a href="Shoping_Hacks.html" class="main-tab">Shop</a>
    </div>
    <div class="nav-right">
        <a href="index.html#about">About</a>
        <a href="index.html#contact">Contact</a>
    </div>
</nav>

<main>
    <h2>Environmental Impact Store</h2>
    <p>Select products and see their environmental impact. Green = low, Red = high.</p>

    <!-- DEPARTMENTS AND PRODUCTS -->
    <div class="card">
        <div class="dept-bar" id="deptBar"></div>
        <div id="productGrid" class="products"></div>
    </div>

    <!-- SELECTED ITEMS -->
    <div class="card selected-list" id="selectedList">
        <div style="font-weight:700;margin-bottom:6px">Selected Items</div>
        <div id="selectedItemsContainer"></div>
        <div class="total-price" id="totalPrice">Total: $0</div>
        <button class="clear-btn" id="clearAllBtn">Clear All</button>
    </div>

    <!-- RECOMMENDATIONS -->
    <div class="card recommendations" id="recommendations" style="display:none">
        <div style="font-weight:700">Recommended Lower-Impact Alternatives</div>
        <div class="rec-list" id="recList"></div>
    </div>
</main>

<script>
// ====== DATA ======
const stores = [
    {
        name: 'River Vally',
        departments: [
            {name:'Food', products:[
                {name:'Glass Jar Pasta', brand:'NaturaFoods', packaging:'Glass', impact:6, price:4.5, tag:'pasta'},
                {name:'Organic Chips', brand:'GreenCrunch', packaging:'Plastic', impact:18, price:2.5, tag:'snack'},
                {name:'Local Honey', brand:'BeeGood', packaging:'Glass', impact:4, price:6, tag:'honey'},
                {name:'Cheddar Cheese', brand:'DairyPure', packaging:'Plastic', impact:10, price:5, tag:'cheese'}
            ]},
            {name:'Household', products:[
                {name:'Reusable Bag', brand:'EcoCarry', packaging:'Fabric', impact:2, price:3, tag:'bag'},
                {name:'Bamboo Toothbrush', brand:'GreenBrush', packaging:'Paper', impact:3, price:2, tag:'toothbrush'}
            ]}
        ]
    },
    {
        name: 'Stop and Shop',
        departments: [
            {name:'Food', products:[
                {name:'Wildflower Honey', brand:'BeeBest', packaging:'Glass', impact:2, price:5, tag:'honey'},
                {name:'Organic Pasta', brand:'FarmFresh', packaging:'Paper', impact:3, price:4, tag:'pasta'},
                {name:'Greek Yogurt', brand:'CreamyVale', packaging:'Plastic', impact:7, price:3.5, tag:'yogurt'}
            ]},
            {name:'Household', products:[
                {name:'Eco Sponge', brand:'CleanGreen', packaging:'Paper', impact:4, price:2.5, tag:'sponge'},
                {name:'Reusable Cup', brand:'EcoSip', packaging:'Metal', impact:3, price:5, tag:'cup'}
            ]}
        ]
    }
];

// ====== INITIALIZE ======
stores.forEach((store,sIdx)=>store.departments.forEach((dept,dIdx)=>dept.products.forEach((prod,pIdx)=>{if(!prod.id)prod.id=`s${sIdx+1}-d${dIdx+1}-p${pIdx+1}`})));

let selectedStore = stores[0];
let selectedDepartment = selectedStore.departments[0];
let selectedProducts = [];
let activeRecommendation = null;

// ====== HELPERS ======
function findProductById(id){for(const s of stores) for(const d of s.departments) for(const p of d.products) if(p.id===id) return p; return null;}
function getAllSelectedProducts(){return selectedProducts.map(id=>findProductById(id)).filter(Boolean);}
function getImpactColor(score){if(score<=5)return'green'; if(score<=12)return'orange'; return'red';}
function getImpactLabel(score){if(score<=5)return'Low'; if(score<=12)return'Medium'; return'High';}
function getRecommendationsFor(product){
    const all = stores.flatMap(s=>s.departments.flatMap(d=>d.products));
    return all.filter(p=>p.id!==product.id && p.tag===product.tag && p.impact<product.impact).sort((a,b)=>a.impact-b.impact).slice(0,3);
}

// ====== RENDER FUNCTIONS ======
function renderDepartments(){
    const bar=document.getElementById('deptBar'); bar.innerHTML='';
    selectedStore.departments.forEach(dep=>{
        const btn=document.createElement('button'); btn.textContent=dep.name;
        if(dep===selectedDepartment) btn.classList.add('active');
        btn.onclick=()=>{selectedDepartment=dep; activeRecommendation=null; renderDepartments(); renderProducts(); hideRecommendations();}
        bar.appendChild(btn);
    });
}

function renderProducts(){
    const grid=document.getElementById('productGrid'); grid.innerHTML='';
    selectedDepartment.products.forEach(p=>{
        const el=document.createElement('div'); el.className='product-card'+(selectedProducts.includes(p.id)?' selected':'');
        const colorClass=getImpactColor(p.impact);
        el.innerHTML=`<div style="display:flex;justify-content:space-between;align-items:center"><div style="font-weight:700">${p.name}</div><div class="badge ${colorClass}">${getImpactLabel(p.impact)}</div></div><div class="prod-meta">${p.brand} • ${p.packaging} • $${p.price}</div>`;
        el.onclick=()=>{
            if(selectedProducts.includes(p.id)){selectedProducts = selectedProducts.filter(x=>x!==p.id); activeRecommendation=null;}
            else {selectedProducts.push(p.id); activeRecommendation=p;}
            renderProducts(); renderSelectedList(); showRecommendations();
        };
        grid.appendChild(el);
    });
}

function renderSelectedList(){
    const cont=document.getElementById('selectedItemsContainer'); cont.innerHTML='';
    const items=getAllSelectedProducts();
    if(items.length===0){ cont.innerHTML='<div style="color:#6b7280">No items selected</div>'; }
    items.forEach(p=>{
        const row=document.createElement('div'); row.className='selected-item';
        const colorClass=getImpactColor(p.impact);
        row.innerHTML=`<div>${p.name}</div><div style="display:flex;gap:8px;align-items:center"><div class="badge ${colorClass}" style="padding:6px 8px">${getImpactLabel(p.impact)}</div><div style="font-size:13px;color:#6b7280">$${p.price}</div></div>`;
        cont.appendChild(row);
    });
    document.getElementById('totalPrice').textContent='Total: $'+items.reduce((s,p)=>s+p.price,0).toFixed(2);
}

function showRecommendations(){
    const box=document.getElementById('recommendations'); const list=document.getElementById('recList'); list.innerHTML='';
    if(!activeRecommendation){ box.style.display='none'; return; }
    const recs=getRecommendationsFor(activeRecommendation);
    if(recs.length===0){ box.style.display='none'; return; }
    recs.forEach(r=>{
        const el=document.createElement('div'); el.className='rec-item';
        const storeOfR=stores.find(s=>s.departments.some(d=>d.products.includes(r)));
        el.innerHTML=`<div style="font-weight:700">${r.name}</div><div class="prod-meta">${r.brand} • ${r.packaging} • $${r.price}</div><div class="rec-store">${storeOfR.name}</div><button class="rec-btn">Replace</button>`;
        el.querySelector('button').onclick=()=>{
            const index=selectedProducts.findIndex(pId=>findProductById(pId).tag===r.tag);
            if(index>=0) selectedProducts.splice(index,1);
            selectedProducts.push(r.id);
            selectedStore=storeOfR;
            selectedDepartment=storeOfR.departments.find(d=>d.products.includes(r));
            activeRecommendation=null;
            renderDepartments(); renderProducts(); renderSelectedList(); hideRecommendations();
        };
        list.appendChild(el);
    });
    box.style.display='block';
}

function hideRecommendations(){document.getElementById('recommendations').style.display='none';}
function setupClear(){document.getElementById('clearAllBtn').onclick=()=>{selectedProducts=[]; activeRecommendation=null; renderProducts(); renderSelectedList(); hideRecommendations();};}
function init(){renderDepartments(); renderProducts(); renderSelectedList(); setupClear(); hideRecommendations();}

init();
</script>
</body>
</html>
