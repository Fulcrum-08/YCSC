<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Environmental Impact Store</title>
<style>
:root{--bg:#f5f7fb;--card:#fff;--muted:#6b7280;--accent:#16a34a;}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,sans-serif;display:flex;min-height:100vh;background:var(--bg);color:#111827}
.sidebar{width:260px;background:linear-gradient(180deg,#eef2f6,#f8fafc);border-right:1px solid rgba(16,24,40,0.04);padding:20px;display:flex;flex-direction:column;gap:12px}
.brand{font-weight:700;font-size:18px;margin-bottom:8px}
.tabs{display:flex;flex-direction:column;gap:8px}
.tabs button{width:100%;text-align:left;padding:10px 12px;border-radius:8px;border:none;background:transparent;cursor:pointer;font-weight:600}
.tabs button.active{background:var(--accent);color:white}
.selected-list{margin-top:8px;padding:10px;background:rgba(22,163,74,0.06);border-radius:8px;font-size:14px}
.selected-item{display:flex;justify-content:space-between;gap:8px;padding:6px 0}
.clear-btn{margin-top:8px;padding:8px 10px;border-radius:8px;border:1px solid rgba(16,24,40,0.06);background:white;cursor:pointer}
.total-price{margin-top:8px;font-weight:700;font-size:14px}
.main{flex:1;padding:28px;overflow-y:auto}
.top-card{display:flex;justify-content:space-between;gap:16px;align-items:center;margin-bottom:18px}
.card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(15,23,42,0.04)}
.impact-number{font-size:28px;font-weight:800;color:var(--accent)}
.dept-bar{display:flex;gap:10px;margin-bottom:14px}
.dept-bar button{padding:8px 12px;border-radius:999px;border:1px solid rgba(16,24,40,0.06);background:white;cursor:pointer}
.dept-bar button.active{background:var(--accent);color:white}
.products{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px}
.product-card{background:var(--card);padding:14px;border-radius:10px;box-shadow:0 6px 14px rgba(15,23,42,0.03);cursor:pointer;transition: transform .12s ease,border .12s ease;border:1px solid transparent}
.product-card:hover{transform:translateY(-4px)}
.product-card.selected{border-color: rgba(16,185,129,0.18);box-shadow:0 8px 22px rgba(16,185,129,0.06)}
.prod-meta{font-size:13px;color:var(--muted);margin-top:8px}
.badge{display:inline-block;padding:6px 10px;border-radius:999px;color:white;font-weight:700;font-size:12px}
.badge.green{background:#16a34a}
.badge.orange{background:#f97316}
.badge.red{background:#ef4444}
.recommendations{margin-top:18px}
.rec-list{display:flex;gap:12px;margin-top:8px;flex-wrap:wrap}
.rec-item{background:#fff;padding:10px;border-radius:8px;box-shadow:0 4px 10px rgba(15,23,42,0.04);min-width:180px;cursor:pointer}
.rec-store{font-size:12px;color:var(--muted);margin-top:4px}
.rec-btn{margin-top:6px;padding:4px 6px;border-radius:6px;border:none;background:var(--accent);color:white;cursor:pointer;font-size:12px}
</style>
</head>
<body>
<aside class="sidebar">
  <div>
    <div class="brand">Env Impact Store</div>
    <div style="font-size:13px;color:var(--muted)">Pick products across stores — score is internal.</div>
  </div>
  <div class="tabs" id="storeTabs"></div>
  <div class="selected-list card" id="selectedList">
    <div style="font-weight:700;margin-bottom:6px">Selected items</div>
    <div id="selectedItemsContainer"></div>
    <div class="total-price" id="totalPrice">Total: $0</div>
    <button class="clear-btn" id="clearAllBtn">Clear all</button>
  </div>
</aside>
<main class="main">
  <div class="top-card">
    <div class="card" style="flex:1">
      <div style="font-size:13px;color:var(--muted);margin-bottom:6px">Environmental Impact Overview</div>
      <div style="color:var(--muted);font-size:12px">Products are color-ranked from green (low impact) to red (high impact). Score is internal only.</div>
      <span id="impactScore" style="display:none">0</span>
    </div>
    <div style="width:320px" class="card">
      <div style="font-weight:700;margin-bottom:6px">Current store</div>
      <div id="currentStoreName">-</div>
    </div>
  </div>
  <div class="card">
    <div class="dept-bar" id="deptBar"></div>
    <div id="productGrid" class="products"></div>
    <div class="recommendations card" id="recommendations" style="display:none">
      <div style="font-weight:700">Recommended lower-impact alternatives</div>
      <div class="rec-list" id="recList"></div>
    </div>
  </div>
</main>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Environmental Impact Store</title>
<style>
:root{--bg:#f5f7fb;--card:#fff;--muted:#6b7280;--accent:#16a34a;}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,sans-serif;display:flex;flex-direction:column;min-height:100vh;background:var(--bg);color:#111827;overflow-y:auto}

/* NAVBAR from index page */
nav{position:fixed;top:0;width:100%;background:#2f5d3a;padding:15px 40px;display:grid;grid-template-columns:1fr auto 1fr;align-items:center;z-index:1000}
nav h1{color:#f1f5ef;font-size:22px;margin-right:20px}
.nav-left,.nav-right{display:flex;gap:22px;align-items:center}
.nav-left{justify-content:flex-start}
.nav-right{justify-content:flex-end}
.nav-center{display:flex;gap:18px;justify-content:center}
nav a{color:#e8f2ea;text-decoration:none;font-size:16px;padding:6px 8px;transition:color 0.3s ease}
nav a:hover{color:#cfe3d4}
.main-tab{background:#f1f5ef;color:#2f5d3a;padding:10px 24px;border-radius:999px;font-weight:bold;transition:transform 0.25s ease,box-shadow 0.25s ease,background 0.25s ease}
.main-tab:hover{background:#e2eadf;transform:translateY(-3px);box-shadow:0 10px 22px rgba(0,0,0,0.25)}

/* PAGE LAYOUT: push content down so navbar doesn’t overlap */
main{flex:1;padding:100px 28px 28px;margin:0 auto;max-width:1200px;display:flex;flex-direction:column;gap:18px}
.card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(15,23,42,0.04)}
.dept-bar{display:flex;gap:10px;margin-bottom:14px}
.dept-bar button{padding:8px 12px;border-radius:999px;border:1px solid rgba(16,24,40,0.06);background:white;cursor:pointer}
.dept-bar button.active{background:var(--accent);color:white}
.products{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px}
.product-card{background:var(--card);padding:14px;border-radius:10px;box-shadow:0 6px 14px rgba(15,23,42,0.03);cursor:pointer;transition: transform .12s ease,border .12s ease;border:1px solid transparent}
.product-card:hover{transform:translateY(-4px)}
.product-card.selected{border-color: rgba(16,185,129,0.18);box-shadow:0 8px 22px rgba(16,185,129,0.06)}
.prod-meta{font-size:13px;color:var(--muted);margin-top:8px}
.badge{display:inline-block;padding:6px 10px;border-radius:999px;color:white;font-weight:700;font-size:12px}
.badge.green{background:#16a34a}
.badge.orange{background:#f97316}
.badge.red{background:#ef4444}
.selected-list{padding:10px;background:rgba(22,163,74,0.06);border-radius:8px;font-size:14px;margin-top:12px}
.selected-item{display:flex;justify-content:space-between;gap:8px;padding:6px 0}
.clear-btn{margin-top:8px;padding:8px 10px;border-radius:8px;border:1px solid rgba(16,24,40,0.06);background:white;cursor:pointer}
.total-price{margin-top:8px;font-weight:700;font-size:14px}
.recommendations{margin-top:18px}
.rec-list{display:flex;gap:12px;margin-top:8px;flex-wrap:wrap}
.rec-item{background:#fff;padding:10px;border-radius:8px;box-shadow:0 4px 10px rgba(15,23,42,0.04);min-width:180px;cursor:pointer}
.rec-store{font-size:12px;color:var(--muted);margin-top:4px}
.rec-btn{margin-top:6px;padding:4px 6px;border-radius:6px;border:none;background:var(--accent);color:white;cursor:pointer;font-size:12px}
.top-card{display:flex;gap:16px;flex-wrap:wrap}
.top-card > .card{flex:1;min-width:200px}
</style>
</head>
<body>

<!-- NAVBAR FROM INDEX -->
<nav>
  <div class="nav-left">
    <h1>Env Impact Store</h1>
    <a href="index.html">Home</a>
    <a href="index.html#mission">Mission</a>
    <a href="index.html#team">Team</a>
  </div>
  <div class="nav-center">
    <a href="programs.html" class="main-tab">Programs</a>
    <a href="map.html" class="main-tab">Map</a>
    <a href="Shoping_Hacks.html" class="main-tab">Shop</a>
  </div>
  <div class="nav-right">
    <a href="index.html#about">About</a>
    <a href="index.html#contact">Contact</a>
  </div>
</nav>

<main>
  <div class="top-card">
    <div class="card">
      <div style="font-size:13px;color:var(--muted);margin-bottom:6px">Environmental Impact Overview</div>
      <div style="color:var(--muted);font-size:12px">Products are color-ranked from green (low impact) to red (high impact). Score is internal only.</div>
      <span id="impactScore" style="display:none">0</span>
    </div>
    <div class="card" style="width:320px">
      <div style="font-weight:700;margin-bottom:6px">Current store</div>
      <div id="currentStoreName">-</div>
    </div>
  </div>

  <div class="card">
    <div class="dept-bar" id="deptBar"></div>
    <div id="productGrid" class="products"></div>
    <div class="recommendations card" id="recommendations" style="display:none">
      <div style="font-weight:700">Recommended lower-impact alternatives</div>
      <div class="rec-list" id="recList"></div>
    </div>
  </div>

  <div class="selected-list card" id="selectedList">
    <div style="font-weight:700;margin-bottom:6px">Selected items</div>
    <div id="selectedItemsContainer"></div>
    <div class="total-price" id="totalPrice">Total: $0</div>
    <button class="clear-btn" id="clearAllBtn">Clear all</button>
  </div>
</main>

<script>
const stores = [
  {
    name: 'River Vally',
    departments: [
      {
        name: 'Food',
        products: [
          {name:'Glass Jar Pasta', brand:'NaturaFoods', packaging:'Glass', impact:6, price:4.5, tag:'pasta'},
          {name:'Organic Chips', brand:'GreenCrunch', packaging:'Plastic', impact:18, price:2.5, tag:'snack'},
          {name:'Local Honey', brand:'BeeGood', packaging:'Glass', impact:4, price:6, tag:'honey'},
          {name:'Cheddar Cheese', brand:'DairyPure', packaging:'Plastic', impact:10, price:5, tag:'cheese'}
        ]
      },
      {
        name: 'Household',
        products: [
          {name:'Reusable Bag', brand:'EcoCarry', packaging:'Fabric', impact:2, price:3, tag:'bag'},
          {name:'Bamboo Toothbrush', brand:'GreenBrush', packaging:'Paper', impact:3, price:2, tag:'toothbrush'}
        ]
      }
    ]
  },
  {
    name: 'Stop and Shop',
    departments: [
      {
        name: 'Food',
        products: [
          {name:'Wildflower Honey', brand:'BeeBest', packaging:'Glass', impact:2, price:5, tag:'honey'},
          {name:'Organic Pasta', brand:'FarmFresh', packaging:'Paper', impact:3, price:4, tag:'pasta'},
          {name:'Greek Yogurt', brand:'CreamyVale', packaging:'Plastic', impact:7, price:3.5, tag:'yogurt'},
          {name:'Mozzarella Cheese', brand:'DairyGood', packaging:'Plastic', impact:9, price:4.5, tag:'cheese'},
          {name:'Yogurt', brand:'CreamyVale', packaging:'Plastic', impact:6, price:3.5, tag:'yogurt'},
          {name:'Yogurt', brand:'CreamyVale', packaging:'Plastic', impact:6, price:3.5, tag:'yogurt'},
          {name:'Yogurt', brand:'CreamyVale', packaging:'Plastic', impact:6, price:3.5, tag:'yogurt'},
          {name:'Yogurt', brand:'CreamyVale', packaging:'Plastic', impact:6, price:3.5, tag:'yogurt'}
        ]
      },
      {
        name: 'Household',
        products: [
          {name:'Eco Sponge', brand:'CleanGreen', packaging:'Paper', impact:4, price:2.5, tag:'sponge'},
          {name:'Reusable Cup', brand:'EcoSip', packaging:'Metal', impact:3, price:5, tag:'cup'}
        ]
      }
    ]
  },
  {
    name: 'ALDI',
    departments: [
      {
        name: 'Food',
        products: [
          {name:'Almond Butter', brand:'Nutty', packaging:'Glass', impact:5, price:7, tag:'spread'},
          {name:'Honey Comb', brand:'BeePure', packaging:'Glass', impact:3, price:6, tag:'honey'},
          {name:'Organic Cereal', brand:'GrainLife', packaging:'Paper', impact:6, price:4, tag:'cereal'},
          {name:'Swiss Cheese', brand:'Alpine', packaging:'Plastic', impact:8, price:5.5, tag:'cheese'}
        ]
      },
      {
        name: 'Household',
        products: [
          {name:'Compost Bin', brand:'EcoBin', packaging:'Metal', impact:5, price:12, tag:'bin'},
          {name:'Recycling Bags', brand:'GreenPack', packaging:'Plastic', impact:6, price:3, tag:'bag'}
        ]
      }
    ]
  }
];

// Auto-generate IDs
stores.forEach((store,sIdx)=>store.departments.forEach((dept,dIdx)=>dept.products.forEach((prod,pIdx)=>{if(!prod.id)prod.id=`s${sIdx+1}-d${dIdx+1}-p${pIdx+1}`})));

let selectedStore = stores[0];
let selectedDepartment = selectedStore.departments[0];
let selectedProducts = [];
let activeRecommendation = null;

function findProductById(id){
  for(const s of stores) for(const d of s.departments) for(const p of d.products) if(p.id===id) return p;
  return null;
}

function getAllSelectedProducts(){ return selectedProducts.map(id=>findProductById(id)).filter(Boolean); }

function getImpactColor(score){ if(score<=5)return'green'; if(score<=12)return'orange'; return'red'; }
function getImpactLabel(score){ if(score<=5)return'Low'; if(score<=12)return'Medium'; return'High'; }

function getRecommendationsFor(product){
  const all = stores.flatMap(s=>s.departments.flatMap(d=>d.products));
  return all.filter(p=>p.id!==product.id && p.tag===product.tag && p.impact<product.impact)
            .sort((a,b)=>a.impact-b.impact).slice(0,3);
}

function renderStores(){
  const container=document.getElementById('storeTabs'); container.innerHTML='';
  stores.forEach(s=>{
    const btn=document.createElement('button'); btn.textContent=s.name;
    if(s===selectedStore) btn.classList.add('active');
    btn.onclick=()=>{
      selectedStore=s; selectedDepartment=s.departments[0]; activeRecommendation=null;
      renderStores(); renderDepartments(); renderProducts(); hideRecommendations();
    };
    container.appendChild(btn);
  });
  document.getElementById('currentStoreName').textContent=selectedStore.name;
}

function renderDepartments(){
  const bar=document.getElementById('deptBar'); bar.innerHTML='';
  selectedStore.departments.forEach(dep=>{
    const btn=document.createElement('button'); btn.textContent=dep.name;
    if(dep===selectedDepartment) btn.classList.add('active');
    btn.onclick=()=>{
      selectedDepartment=dep; activeRecommendation=null;
      renderDepartments(); renderProducts(); hideRecommendations();
    };
    bar.appendChild(btn);
  });
}

function renderProducts(){
  const grid=document.getElementById('productGrid'); grid.innerHTML='';
  selectedDepartment.products.forEach(p=>{
    const el=document.createElement('div'); el.className='product-card'+(selectedProducts.includes(p.id)?' selected':'');
    const colorClass=getImpactColor(p.impact);
    el.innerHTML=`<div style="display:flex;justify-content:space-between;align-items:center"><div style="font-weight:700">${p.name}</div><div class="badge ${colorClass}">${getImpactLabel(p.impact)}</div></div><div class="prod-meta">${p.brand} • ${p.packaging} • $${p.price}</div>`;
    el.onclick=()=>{
      if(selectedProducts.includes(p.id)){
        selectedProducts = selectedProducts.filter(x=>x!==p.id);
        activeRecommendation=null;
      } else {
        selectedProducts.push(p.id);
        activeRecommendation = p;
      }
      renderProducts(); renderSelectedList(); updateImpact(); showRecommendations();
    };
    grid.appendChild(el);
  });
}

function renderSelectedList(){
  const cont=document.getElementById('selectedItemsContainer'); cont.innerHTML='';
  const items=getAllSelectedProducts();
  if(items.length===0){ cont.innerHTML='<div style="color:var(--muted)">No items selected</div>'; }
  items.forEach(p=>{
    const row=document.createElement('div'); row.className='selected-item';
    const colorClass=getImpactColor(p.impact);
    row.innerHTML=`<div>${p.name}</div><div style="display:flex;gap:8px;align-items:center"><div class="badge ${colorClass}" style="padding:6px 8px">${getImpactLabel(p.impact)}</div><div style="font-size:13px;color:var(--muted)">$${p.price}</div></div>`;
    cont.appendChild(row);
  });
  document.getElementById('totalPrice').textContent='Total: $'+items.reduce((s,p)=>s+p.price,0).toFixed(2);
}

function updateImpact(){
  const total=getAllSelectedProducts().reduce((s,p)=>s+p.impact,0);
  const el=document.getElementById('impactScore'); if(el) el.textContent=total;
}

function showRecommendations(){
  const box=document.getElementById('recommendations'); const list=document.getElementById('recList'); list.innerHTML='';
  if(!activeRecommendation){ box.style.display='none'; return; }
  const recs=getRecommendationsFor(activeRecommendation);
  if(recs.length===0){ box.style.display='none'; return; }
  recs.forEach(r=>{
    const el=document.createElement('div'); el.className='rec-item';
    const storeOfR=stores.find(s=>s.departments.some(d=>d.products.includes(r)));
    el.innerHTML=`<div style="font-weight:700">${r.name}</div><div class="prod-meta">${r.brand} • ${r.packaging} • $${r.price}</div><div class="rec-store">${storeOfR.name}</div><button class="rec-btn">Replace</button>`;
    el.querySelector('button').onclick=()=>{
      const index=selectedProducts.findIndex(pId=>findProductById(pId).tag===r.tag);
      if(index>=0) selectedProducts.splice(index,1);
      selectedProducts.push(r.id);
      selectedStore=storeOfR;
      selectedDepartment=storeOfR.departments.find(d=>d.products.includes(r));
      activeRecommendation=null;
      renderStores(); renderDepartments(); renderProducts(); renderSelectedList(); updateImpact(); hideRecommendations();
    };
    list.appendChild(el);
  });
  box.style.display='block';
}

function hideRecommendations(){ document.getElementById('recommendations').style.display='none'; }

function setupClear(){
  document.getElementById('clearAllBtn').onclick=()=>{
    selectedProducts=[]; activeRecommendation=null;
    renderProducts(); renderSelectedList(); updateImpact(); hideRecommendations();
  };
}

function init(){
  renderStores(); renderDepartments(); renderProducts(); renderSelectedList(); updateImpact(); setupClear(); hideRecommendations();
}

init();
</script>
</body>
</html>
